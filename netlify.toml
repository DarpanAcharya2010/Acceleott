# ======================================
# ‚úÖ Root-level Netlify Config
# React (Vite) + Functions
# ======================================

[build]
  base = ""           # Vite frontend folder
  publish = "acceleott-mueller/dist"   # Build output folder
  command = "npm run build"
  functions = "netlify/functions"      # ‚úÖ Root-level functions folder

[dev]
  framework = "vite"
  command = "npm run dev:frontend"
  targetPort = 5173
  port = 8888
  publish = "acceleott-mueller/dist"
  functions = "netlify/functions"


# ‚úÖ React Router fallback (no 404s)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# ============================================================
# ‚öôÔ∏è Function Build Settings
# ============================================================

[functions]
  node_bundler = "esbuild"
  included_files = ["netlify/functions/**"]

# ============================================================
# üåç Environment Variables (Build Defaults)
# ============================================================

[build.environment]
  NODE_VERSION = "20"
  NPM_VERSION = "10"
  SECRETS_SCAN_OMIT_KEYS = "ADMIN_EMAIL,EMAIL_USER,EMAIL_PASS,JWT_SECRET,MONGODB_URI,NODE_ENV"
